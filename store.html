---
layout: default
title: Store
---
<script>
const BASEURL = "{{ site.baseurl }}";

function openModal(item) {

  document.getElementById('modal').classList.remove('hidden');
  document.getElementById('modalImage').src = `${BASEURL}/${item.image}`;
  document.getElementById('modalTitle').textContent = item.name;
  document.getElementById('modalPrice').textContent = formatPrice(item.prices);
  document.getElementById('modalDesc').textContent = item.description;
  document.getElementById('modalIncludes').innerHTML = item.includes
    .filter(i => typeof i === 'string' && i.trim() !== '')
    .map(i => `<li>${i}</li>`) 
    .join('');
  document.getElementById('modalAddBtn').onclick = () => addToCart(item);
}

function closeModal() {
  document.getElementById('modal').classList.add('hidden');
}

function goToBuyPage() {
  window.location.href = '/product';
}

document.addEventListener("DOMContentLoaded", () => {
  const locale = localStorage.getItem("preferredLocale") || navigator.language || "en-US";
  const currency = getCurrencyCode(locale);
  const formatter = getFormatter(locale);

  document.querySelectorAll(".product-card").forEach(card => {
    const prices = JSON.parse(card.dataset.prices);
    const price = prices[currency] || prices["USD"] || 0;
    const priceEl = card.querySelector(".product-price");
    if (priceEl) priceEl.innerText = formatter.format(price);
  });
});
</script>

<!-- Hero -->
<section class="flex justify-center py-16 px-4">
  <div class="bg-card rounded-lg p-8 max-w-3xl w-full text-center">
    <h1 class="text-4xl font-bold mb-4 text-white">KommuAssist 2.0</h1>
    <img src="{{ "" | relative_url }}/img/products/device/1.png" width="100%" class="mb-4">
    <p class="mb-4 text-white">RM3,699 or RM150/month with rent-to-own</p>
    <button onclick="goToBuyPage()" class="bg-blue-500 px-6 py-2 rounded-full text-white">Buy</button>
  </div>
</section>

<!-- Accessories -->
<section class="px-6">
  <h2 class="text-2xl font-semibold mb-6 text-white">Shop Accessories</h2>

  {% assign categories = "Hardware,Cables & connectors,Others" | split: "," %}
  {% for category in categories %}
    <h3 class="text-xl font-bold mt-8 mb-4 text-white">{{ category }}</h3>
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
      {% for item in site.data.products %}
        {% if item.category == category %}
          <div onclick='openModal({
            name: "{{ item.name }}",
            prices: {{ item.prices | jsonify }},
            image: "{{ item.image }}",
            description: "{{ item.description }}",
            includes: {{ item.includes | jsonify }}
          })' class="product-card bg-card p-4 rounded-lg text-center cursor-pointer" data-prices='{{ item.prices | jsonify }}'>
            <img src="{{ item.image }}" alt="{{ item.name }}" class="w-full h-32 object-contain mb-3 rounded">
            <div class="font-semibold text-white">{{ item.name }}</div>
            <div class="text-sm text-gray-400 product-price">Loading...</div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  {% endfor %}
</section>

<!-- Accessory Modal -->
<div id="modal" class="fixed inset-0 bg-card bg-opacity-70 flex items-center justify-center z-50 hidden">
  <div class="bg-card p-6 rounded-lg w-full max-w-4xl relative">
    <button onclick="closeModal()" class="absolute top-2 right-2 text-white">âœ•</button>
    <div class="flex flex-col md:flex-row gap-6">
      <div class="md:w-1/2">
        <img id="modalImage" src="" class="w-full h-64 object-contain rounded">
      </div>
      <div class="md:w-1/2">
        <h3 id="modalTitle" class="text-2xl font-bold mb-1 text-white"></h3>
        <p id="modalPrice" class="text-sm text-gray-400 mb-4"></p>
        <p class="font-semibold text-white mb-1">Description</p>
        <p id="modalDesc" class="text-sm text-gray-300 mb-4"></p>
        <p class="font-semibold text-white mb-1">Included:</p>
        <ol id="modalIncludes" class="list-disc list-inside space-y-1 text-white"></ol>
        <button id="modalAddBtn" class="bg-blue-500 px-6 py-2 rounded text-white">Add to Cart</button>
      </div>
    </div>
  </div>
</div>
