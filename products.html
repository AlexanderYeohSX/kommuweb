---
layout: default
title: Products | kommu.ai
stylesheet: products
---
<div class="container" id="productlocationizer">
    <h3>Find the right model for your car:</h3><br>
    <div class="row align-items-center">
        <div class="col-lg-6 col-md-12 mb-4">
            <select aria-label="Select your car model" class="form-select" id="localizer">
            </select>
        </div>
        <div class="col-lg-6 col-md-12 mb-4">
            <button class="btn btn-tertiary" id="localizerer">Search</button>
        </div>
    </div>
    <h3 class="mt-4 mb-4">All Products</h3>
        <div class="products">
            {% for product in site.products %}
            <div class="col md-6 sm-12">
                <div class="card m-1" style="width: 18rem;">
                    <img src="{{ "" | relative_url }}/img/{{ product.img }}-1.jpg" class="card-img-top" alt="Image of {{ product.title }}" style="height: 11rem;">
                    <div class="card-body" style="height: 13rem">
                        <h5 class="card-title">{{ product.title }}</h5>
                        <p class="card-text">{{ product.description }}</p>
                        <a href="{{ product.url | relative_url }}" class="btn btn-tertiary" style="display: block; position: absolute; bottom: 20px; right: 20px;">View</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
</div>
<script>
    const localizerer = document.getElementById("localizerer");
    const localizer = document.getElementById("localizer");

    async function load() {
        const remote = "https://raw.githubusercontent.com/kommuai/bukapilot/snapshot/selfdrive/car/supported_vehicle.json";
        const resp = await (await fetch(remote)).json();

        const product_urls = {
        {% for product in site.products %}
            {{ product.key }}: "{{ product.url | relative_url }}",
        {% endfor %}
        };

        []
            .concat(
                resp.standard.map(vehicle => ({
                        label: `${vehicle.brand} ${vehicle.model} ${vehicle.year} ${vehicle.variant}`,
                        key: "standard"
                    })),
                resp.semi_acc.map(vehicle => ({
                        label: `${vehicle.brand} ${vehicle.model} ${vehicle.year} ${vehicle.variant}`,
                        key: "semi_acc"
                    })),
                )
            .sort((a, b) => { return b.label < a.label })
            .forEach((item) => {
                    const option = document.createElement("option");
                    option.value = product_urls[item.key];
                    option.innerText = item.label;
                    localizer.appendChild(option);
                });
    }

    window.onload = load;

    localizerer.onclick = () => {
            const params = new URLSearchParams();
            params.append("car", localizer.selectedOptions[0].innerText);
            window.location.href = `${localizer.value}?${params.toString()}`;
        };
</script>
